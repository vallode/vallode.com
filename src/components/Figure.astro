---
import type { ImageMetadata } from "astro";
import { Image } from "astro:assets";

type Props = {
  src: ImageMetadata;
  alt: string;
};

const { src, alt } = Astro.props;
---

<figure>
  <Image src={src} alt={alt} />
  <figcaption>
    <slot />
  </figcaption>
</figure>

<style>
  figure {
    display: flex;
    flex-direction: column;
    margin: var(--spacing-lg) 0;
  }

  img {
    border: 1px solid var(--border);
  }

  figcaption {
    border-left: 1px solid var(--border);
    font-size: 80%;
    padding-left: var(--spacing);
    padding: var(--spacing-xs) 0 var(--spacing-xs) var(--spacing);
  }

  @media (prefers-color-scheme: dark) {
    :global(:root:not(.light)) img {
      filter: brightness(0.7);
    }
  }
</style>
